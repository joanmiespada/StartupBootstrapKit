sudo: required
language: node_js
services:
- docker
node_js: node
cache:
  directories:
  - node_modules
  yarn: true
script: cd ./apis && yarn bootstrap --ignore-engines && yarn test-easy
before_install:
- openssl aes-256-cbc -K $encrypted_129fa02b03c4_key -iv $encrypted_129fa02b03c4_iv
  -in ./apis/certs/apicert.pem.enc -out ./apis/certs/apicert.pem -d
- docker-compose --version
- docker-compose -f ./apis/docker-compose.yml up -d mongodb
- npm install -g lerna
- npm install -g coveralls
after_success: coveralls
env:
  global:
  - secure: oq4HMOUkQ6lfsvNYZjNjtjR6PRPTrkySLGx63zqyjKQMxmE7CeYDIvbnrpf7RMo1TYRuzj4KaAHpPOw3dZbHj/l/TwoUc/R4x1AXihzD9cs6f3XES7HfYGxeeJRulM7vbuurrBeHTT9CvCykcAIMLjgVGTzFiDUeKE6hRq8Dn5gaRZSrr+EtZh6Ft3zxmR8I9Oxlvt6Bh7LXeCgMtMcPLnQEMoNQYd0URH42faJHbzOMG5m4XXF0lJU2xr3XN1iBV1UIj/Ddi+2AjsT5L4ES2laSQGk1ovl9EI7l78E0lCh3pC3Yz9lRsI5NqGbTjrDtOcJb6b6fPjcKmq0W6NXhfUKdo0hpdHDJ6qhXOaH51r/Y8DWBamq+R9VaTTF0UZJJL1fpX/+Y4UVLVMTB4ZTVMKYXjphtHiBMLqhPFzrM2r47Z2wKkZRDmQ1v7qimejNcv7HdiMN+fcngLzPmf48hwVD+NMCTmO+JYZQInYO1QN3DX8yXFmUfq65+vSE3d6MTc4EyjEhuv+rQRZz1DyL97PX5kz/0CvtFYR+uN84tj6kQqyybhE7NSv/s5gBbdu1HE7/uL9JjswObiLNbISm1gHdTR2nXwgOFTuyXJJ8h6Cu6q6+wLJ3dQu+oB2ADYm0lXTRjFb0p3Qq+DdXULhv1HYgc2W2PWAwhv3BjQNn3csI=
  - secure: lW+/GOuzzYfPBaN3x8LOPYf2dLXRb2MjeDmAKY1kMXFXda1GxLnk2j72rKFbIAtNoEc13yBrV+a+qL16Gk9jKb9T6l8iymoOL7d+n64zVCokHi6aa5+Keu7fm66aSNvC3FeyjBkJdAIjz3mF2zW04VnK6+ij5cup6VsmxDGX34BZ92WLU/JBDz7qVSMz/3ikEUSkyuIgFGw4L5lmQu3nEmCv5DcALwsWVW2odShIr0ndLABZkYL0f4SyHowGLOSzF/O6XSKgt8AfRrMfqlHhgzddF2Q48Kw7xqBCJwhrdZuKMVfXKLEV048S41wERcTclhgn9RxrupaA0MFjRNJlF0x0VCeGLeSv2HpJRCGgr4Wqol1iKZIqOsY4DFmIo6HHCHctUIgNRpXCq/lM0RCc2Mm9GAZ1GycgbV+QKcashyh8RidDR+A1vB7WFaHKdnyvqWrUTpiXQa8hvLAueW/I+r2UTbjymIm9k7VRvpSYsHRJqB7EOqm2Z0UXgMdi+KRLHcqb719NfRN85/xT+h8W1FUMK1UeezWDc6F/I0uzwJrqNSb2nRuRYJDT89gXQiivPqqF9eK4/CkuCPoKZmaEb5h4E/N3rKGzrMBBtIJHWWriAilO61rEGznmZEWPeiG1PpjwztiQ+SShwYACeIWLNuUKPrANPWSdLubSXV0yak0=
  - secure: WAWwrHlP5RASSvKC7BJXDBiI/7ULKR3tOL1yrEa6ib7JHogRGQsCPou/Hab0EB5y5NaLFFaGtFQekEllHjdeesGfRwTYpVYyFumHB4hbzMH1tAvNbagd+zGU70aqf09QiUBkPH3i2kpxvleS+Tru6IZ/VE/2Jtbh8/VI73eI4X3eAF1nTn5Q9BuI25bdhtogJDE7Es7+ycuvEh+tARFmWUlGo8aegp2Bpun9kuSG8nP8TlW1V5Mp0EyTZf7S8El5Yqs702YZ/lSZ1iRxKfeq2YrANaImcguS8+HztYBm15abmWhRR1jg2wNDqcUTepT8FhDVAaA2VzajFmq4mOIm9L7NcwSLSXpM+uCv9+r46nCWpgClDMPTWJao+wlYqz8zqP49IzYclJPv9nYChlgVq7ckskpGSuXaYfhIRAazAkRZpxQ0cvr5jyzX4uzaEaa1lHPowR1pIEWOVvSg12F0vEU/47KqkJydjQOy0tI1o1f0AO/ZQ8dQiGzo0wR+2QDZs2HdExuh+BvZGsGHn2pUmg/iIySUmuw4K88DVx5p1NOU3Pk6bF5mC3yaY7R0LFKUJDn9cKk3i+uYr1T6JTvFguxkQqHcVeMh6n+WFzacO92nVwzf6Q2UzsHv9ckq/CG8CITWQ3xLwFqisCZG0qguFc6fW2JcwH2ejUxsetgEVGs=
  - secure: hftd8dZhoOUW8pY4nth3nPW3K4qOEW1z6BPnfU7tlKkUJ5NcgSaarQ7XanWrDF4+RHKF6oL5J28AbffPoIIOQ308+l0fIz+rYsjrOtcJsEfEC/NgiO5EKcG+filxySlCEeS/pOjULKGKbT0LiZfHeliFEkzawSe4LXG7jV/BeHinBeywoaWeh1UqKcKZdh4wsHdr8K4OH+BnP7UHUuqBXvyhk3SxchkkTm6um72TN1sC2X5fg19z66T96Ek4qmc8lNxEqhjWiedlNSWJymmyVFzYLWzZRzPBR6rSGymjHsmjIRk56ERuOsNBYb8LCrMxbhJXS2JcCdBPThN0MAMiR2xADpRLUHmw2hjnAsQ2APj6Yul1rY70ytycNf3y5QsQKxm7kVSKGv2EaZF641xK3ssYXFhtlSJ8B5Q2A0gkhsxL3JQpQIKUydWnUI2YsUI+0ny7CIxWPuqO0wwZf8bT++zC3338janRDy7yOpFOdozYvM0Lqz1sbeVfF5kMBl0JkW1YG5f19wSbLkSgGlzZjg0mudjbbxEgW8esceEG/Hont0ItIb5kYZFdFr4B5HRLXwcQN0NcURs10O/5Upr5ADucTwrEkEbGDgPGw9zpab076tmdTHQysVGsknKc6EOYArL/0b7U93iA8uLUYejIVoQXj6ca94JAp551nf1GanM=
  - secure: i8wSDrYyOJztFYst9m6zJFFIfOamhSP9RtlhQgFJNG9nOXftizomCcctH8ZNOCMLa0r3vjs1BuYjxKmI3s7/snhyujrQ9DGGtCURB8qlYZaj4FTgFLQ10UI15aLkR8i7TuMVSKlIhrbC6rQ6Je82jPmbab7W4+gN1X7xgpcfZfmL3Bz5ihv/cUKakdK6HrClKrR25hpl0QoGFEoHpvyTY0pmwbgKPZ/eCfvhCXfoTD1+f/D18+Oyf5BKKHJOCaik/5gPnAF41pTcisqhGfKQSWmTkHanDZNOFtiMs3sUexeaIqgEp5RRl/kqUoQf4/nPblJyS5g0CkCPxHGVLQCYDPvejOVM4zd42vqkQqysSS9sCwE4gvtxZ1ytyV/Tj/JiHeo7f6ON5bnrpnMVRHVfKJuM0hfVCW46outGaGwxrq2n5aewxiTF2h1r+Jc/zxqfStKAgvHVaJpjHg0ZKDSckv+LuJE+BKl9on6XmndqImQLNAjTpc0V1HhdpXsdpRmarQN5j2OeKbiRuxXdZWTc43NFQVlzyBfROqRDbmYmkHWwO3sdTEhqibY9nHqID+5OkGmhgIgLZ603+gMlrGpt7nzSDYpgXgZV9/ckEyJhHQh6+G2hn1CV/nVMDsNOVaI2ScI2YK+vmcWT76JU1nATvUQVum13Sfl5IW9M4IcL+MU=
  - secure: FBTJ91Utjv5EjaLj+XUdnp5w/olOmNTl94pOqtlCW1Eba1epFK4UtUftzUoVdAcFrEOleREYb5Li5sDzxmgHbUNCQZK1bPy0f+jfX5lVDcSnuXBquqmaOyhDDuMxC/WPE+f+0GMNQKvANM24lhxSi4wjiPeitpKHOgZ8BYYGlYMLSz8lQYg5y8QLejRxzpF1rvIM6FEG5sA69TgoP4w0d3ofRMHKFvQCSRgKsa4pUJgjiMmjzdINW5mbZ1uB9oYeM0vdnnkPn6ehkq7Xws5wL4wCQzYKFH28pQjSEmoEbTj62dmboNOtHLP/+20BetaRvI3fnahhaOO3NDK0xjYlseQ8/HCQyhTVymBTLg6aMD7Q7gr9t7+h36NOXV8OEoFs2XkXKfzt/EIgv1jt/FmUNJ4slQok2ZhxtNtO6XoV36pP+yxftxQcSwzl/WDwCbTodUbCUtR349Lkkxev0dHJR0joFSGrqGZc131kE4MAhY6lYvdGpzT1gfADmyTO6Vi6vRir9R/02ON776wkGyYpFeSxN2Cws2I4R43F0lxfJ6TxlJMn53B/rZ79LRaUvTggQv5vSG3c02SBS3hHtljkEL1rAT8D0+YSdFcxXFOiSrDHQ/imh+g5mGgDBxsAPuEqFNuOP+re2PvbXXQNaqtpnWWaiRss9TPwxEHY89HkCes=
  - secure: SYXOFPwSjW466R2vnVua1xDF1VDi32Y3KBkT8kPcEWBS5sW1Knc6uEtSiudhU4jlewEtYZpf+PZcS9H1Fb8cB9hCJpi7IZdr8cbzPAMd1qgBTEC5Bm+H4Ok+uYIgFwbdPQnhLpYcwCp6TxHQ5G68uuY6QY0xWC70KqHy/IdjTXeQWt5po/n6myL6TENUAT6yIbI6sVO4LGX+5L+ABO7S0ajRkjo3lCZOemh5RMM+pjmBEUVVJtlohlevgszh2+B8KaT15p/334257TBf7eaTJE4hKDoh03xXqlPzgfUWnWIFnpDJRY2ZNBbZLPl7/CfM9miHspajP5zW+APMWEankjieu2gGIZa5Ly7ubd9hqdMOYMsfVyjiQv9wG9a3pgC/f3DzLYgvaK1q2lvUbtzGO/ZC7qEopTeqUv8qhS1RBTa67aOgOP3fV6NX/alSvjjV7XGeWViVJAUInc5mH4ts8DYymXGx8N1HG+83mYHFOh83fH0l2fCkgvM35MVcvvOEsEiVp5ss8V81DBm/Mr4tnYHr0SRJZzn4fJyvzsQXVco75CE6TyK2Cz3OXwkwRbd/+W+h1pCl8gCWKOHxcrRqRY5a0OpVnnDrQ6GcOq5jTljkghziT5+RY3WKfTpOd4JI6GLKIRI2UNRUgakQa7AgT132bod/o6K6nInajNfdhAU=
  - secure: LBQnrVRtnRvMzVCdafIgxEIBCXDiiWKyze0oV0RFNDbe6qG3eJ2KRPEsLI+flmraHvEQ01ZzjoxWJzV3jOxDCd7/B1zQ7PN3nGkKJX0WTezU5d2eYVfvqOud75kWSAYKjQL6Fdk3WPCx1SoGYe6CF+3jICKx6RKHBR5AO5XCynPNhofY+KtiN3QQ6SPRpWrGLDZU0JfsawZxtB3pP/jmqG9Hg5JXM8SbSACoVUHzjb/ar+5l31F5Nlo4+EVIn0fiweb9ddeQasdTlSi9l/PHVFzSZcwiiGbZWSFtClhNrXEpTPxbZuIEsNnf+TOmi50zraB24Mnvy+GB3SwTsA7aPY9LAX+AJe3KxhEkF1v1yNY/ePqy5uo20+6IC7h0sCkJ1ezsz38lK8RbMT+6JWQh16woX7srQdKWfo7TEvOg5D+qu0K9zystsG4S6lmftvXMOrBybCv0nIQsjL4+HuQZI5U8ziDgocY8epybg/yG6HBmKkPCCPMQy+4gqYZsfJJJa5Fa7kuDkzN1a1StQMBF0psOObY8QIy5S4ybzF254YT08OwsIZNxI+gbIKuuMnHenwGEK88ywDVcuEwhtIwVreY+81b2TUDUAQELcX/z+5rCoruHaMWfzZtAYkkzyLChb3wZrHMmgfXWpVBfEkYDaZ105f8xrWoyhOPeDEvOx3g=
  - secure: vY8uRyKYhSRdmJCZ9a0Db9vK608UdeUNFbnl1a4dT5M+/kGh7Iva1yXDFW7e1URd7pjRlvT17h0MjEKoQHA8D/HDq71xarUUYxDqy4wFQbxPhd9ZI4AmU3jhbcb9gvSoRJElZpg35dq09UTu5GjwvTwgq9nrJUFzY3/3iT1T98Zx19qmqVv/tRPF3hsvXlaqkiyvAKgtSD2D2hYzFM7D5KyNcJ5GGdg1DCeCbKgiyZeqORPqZZpPrjSvMaRbMZBsew9UnYYDknhKUcmpxYMo7NzcqjMmJvPj/W0RmYy0H5dKMqAdxEsB/t1lpNki2S+UaepuK+WGPZQK/jhujOAqyHC3h9ZPdBGTz5g7hoGlFsahp7NZHvgOP0jJWTje6fPoGeSUTRH6c9mASlJt+bfw8P6l0Qf54fjuXZpj4l7fdPhBYXjviZ4Mm8m2U58f851pKb/dCg/YqTfie0lFYIH3yTyzZjkx2U+x8uzGMbrEJ+9MH0vQb4OGBrvqn07CzeD52gW9f+UB/A0Tru4N922twAKDYuifdBC4SiKC4UqxueMAqrkYWrf8JiGqSrs3dh8pi2596CqzzGiujp1MYG5gSoqfcTLl4L14APZbu81cfab1mpictox2M+6wbNE1kowUvKqWCghhcy6GrvY7iVdMondejT0/chyYTdEjRoIm0HI=
